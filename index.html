<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>間隔複習單字測驗機</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <header>
        <h1>間隔複習單字測驗機</h1>
        <div id="loader-status">正在載入題庫...</div>
    </header>

    <main>
        <section id="quiz-settings" class="container hidden">
            <h2>📝 測驗設定</h2>
            
            <label for="sheetUrl">Google Sheets CSV 連結：</label>
            <input type="url" id="sheetUrl" placeholder="請貼上發布為CSV的試算表連結" required disabled>
            
            <div id="word-count-info"></div>

            <label for="rangeStart">序號範圍:</label>
            <div class="range-inputs">
                <input type="number" id="rangeStart" value="1" min="1">
                到
                <input type="number" id="rangeEnd" value="50" min="1">
            </div>

            <label for="quizCount">出題數：</label>
            <input type="number" id="quizCount" value="10" min="1">

            <label>題型比例 (%):</label>
            <div id="ratio-presets" style="display: flex; gap: 10px; margin-bottom: 15px;">
                <button type="button" data-ratio="70">平衡練習 (70/30)</button>
                <button type="button" data-ratio="50">強化記憶 (50/50)</button>
                <button type="button" data-ratio="0">輸出專攻 (0/100)</button>
            </div>
            
            <input type="range" id="selectionRatio" min="0" max="100" value="70">
            <span id="ratioDisplay">70% 選擇題 / 30% 填空題</span>
            <button id="startQuizBtn" disabled>開始測驗</button>
        </section>

        <section id="quiz-area" class="container hidden">
            <div id="quiz-header">
                <span id="timer">時間: 00:00</span> |
                <span id="progress">第 1 題 / 共 10 題</span>
                <button id="pauseBtn">暫停</button>
            </div>
            
            <h3 id="question-text"></h3>
            
            <div id="choices-container" class="options hidden">
                </div>

            <div id="fillin-container" class="options hidden">
                <input type="text" id="fillin-answer" placeholder="請輸入英文單字 (忽略大小寫)">
                <button id="submitFillin">送出</button>
                <p id="feedback" class="feedback-text"></p>
            </div>
        </section>

        <section id="result-area" class="container hidden">
            <h2>🎉 測驗結果</h2>
            <p>分數：<span id="final-score"></span></p>
            <p>用時：<span id="final-time"></span></p>
            
            <h3>錯題回顧</h3>
            <div id="mistake-review">
                </div>
            
            <button id="restartBtn">再測一次</button>
            
            <hr>
            
            <h2>歷史紀錄 (近 10 次)</h2>
            <table id="history-table">
                <thead>
                    <tr>
                        <th>分數</th>
                        <th>用時</th>
                        <th>方式</th>
                        <th>題數</th>
                    </tr>
                </thead>
                <tbody>
                    </tbody>
            </table>
        </section>
    </main>
    
    <script src="script.js"></script>
</body>
</html>